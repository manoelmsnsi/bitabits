<?php class Pareto extends Controller {       private  $auth,$db;    public function acesso_restrito(){                  $this->auth = new AutenticaHelper();        $this->auth->setLoginControllerAction('Index','')                   ->checkLogin('redirect');                      $this->db = new AdminModel();     }        public function rel_pareto(){        $acesso = new SessionHelper();        $menu = new MenuHelper("An치lise de Produtos", $Class, $AcaoForm, $MetodoDeEnvio);                echo $menu->Menu();                $data_inicial=$_POST["data_inicial"];        $data_final=$_POST["data_final"];        $valor1=$_POST["valor1"];        $valor2=$_POST["valor2"];        $valor3=$_POST["valor3"];                      $a=$valor1;           $b=$valor2;           $c=$valor3;                                                 $produto =  new ItensModel();           //AND( data_lancamento>='$data_inicial' AND data_lancamento<='$data_final')           $listar_produto = $produto->listar_Itens($join, $limit, "tabela = 'Venda' ", $offset, 'valor_total_unitario desc', "id_produto,(SUM(valor_venda)) AS valor_total_unitario,((sum(valor_venda)/((select SUM(Itens1.valor_venda)from Itens AS Itens1 WHERE Itens1.tabela='Venda' )))*100) AS taxa_unitaria","id_produto");              $relatorio_pareto=$listar_produto;              for($cont=0;$listar_produto[$cont]<>null;$cont++){                               $taxa_total=$taxa_total+$listar_produto[$cont]["taxa_unitaria"];                $relatorio_pareto[$cont]["taxa_acumulada"]=$taxa_total;                if ($taxa_total <= $a) {                    $relatorio_pareto[$cont]["classificao"] = 'A';                  }                if (($taxa_total <= $b) && ($taxa_total >$a)){                   $relatorio_pareto[$cont]["classificao"] ='B';                  }                if (($taxa_total <= $c) && ($taxa_total >$b)) {                   $relatorio_pareto[$cont]["classificao"] ='C';                  }                      }                       $dados['listar_pareto'] = $relatorio_pareto;                 $this->view('listar_pareto',$dados);               }       public function form(){            $this->acesso_restrito();//        $filial = new FilialModel();          //        $status = new StatusModel();        //        $id_tabela= $this->getParams('id_tabela');//        $tabela = $this->getParams('tabela');                  $acesso = new SessionHelper();        $menu = new MenuHelper("Bitabits Relat칩rio de Pareto", $Class, $AcaoForm, $MetodoDeEnvio);                echo $menu->Menu();              $contomando="/Pareto/rel_pareto/";                    $form = new FormularioHelper("Relat칩rio de An치lise de Produto", "col-md-12", $contomando,"POST", $icone);      //  $form = new FormularioHelper("Cad","col-md-12 ",$contomando."tabela/$tabela/id_tabela/$id_tabela/","POST");        $inputs .= $form->Input("date", "data_inicial", "col-md-3", $data_inicial["data_inical"], $required,"Data Inicial");        $inputs .= $form->Input("date", "data_final", "col-md-3", $data_final["data_final"], $required,"Data Final");        $inputs .= $form->Input("text", "valor1", "col-md-2", $valor1["valor1"], $Required, "Valor de Corte 1 (80)", $disable);        $inputs .= $form->Input("text", "valor2", "col-md-2", $valor2["valor2"], $Required, "Valor de Corte 2 (95)", $disable);        $inputs .= $form->Input("text", "valor3", "col-md-2", $valor3["valor3"], $Required, "Valor de Corte 3 (100)", $disable);                $inputs .= $form->Button("btn btn-rose  pull-right ","Gerar");               $form->card(__CLASS__,$inputs,"col-md-12",$comando,"POST","rule");    } } ?> 